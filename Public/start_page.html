<!DOCTYPE html>
<html>
    <head>
        <title>Start Page</title>
        <!--loads in a-frame and the sperical-env-map provided to us by Anthony-->
        <script src="/js/aframe.min.js"></script>
        <script src="/js/spherical-env-map.js"></script>
        <!--a-frame component used to do animations retrieved from https://github.com/supermedium/superframe/tree/master/components/animation/-->
        <!--site was found from https://aframe.io/docs/0.8.0/core/animations.html-->
        <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script> 
        
        <!--Component files loaded in-->
        <script src="/socket.io/socket.io.js"></script> 

    </head>
    <body>
        <a-scene>
            <a-assets>
                <img id="start-texture" src="assets/materials/startPage.png">
            </a-assets>

            <!--loaded in camera manually and added wasd controls so you can move around the screen-->
            <a-entity position="0 3 0" camera look-controls wasd-controls>
                <a-entity cursor="fuse:true; fuseTimeout:500; rayOrigin: mouse"></a-entity>
            </a-entity>        

            <a-entity geometry="primitive:plane; width:13.5; height:16" material="src: #start-texture" id="front" position="0 3 -10">
            </a-entity>
            
            <!--making a pretty background. Code from Anthony's examples-->
            <a-entity id="background" geometry="primitive:sphere; radius:500" material="shader:flat; src:#backgroundImg; side:back; height:1078; width:1078"></a-entity>

            <a-entity id="vrUser" geometry="primitive: box; width: 4; height:2; depth:0.01" position="0 0.3 -10" material="color: #ff8c66">
                <a-text value="VR User" color="black" position="-1.6 0 0.2" width="20" height="20"></a-text>
            </a-entity>
            <a-entity id="mobileUser" geometry="primitive: box; width: 4; height:2; depth:0.01" position="0 -3 -10" material="color: #ff8c66">
                <a-text value="Mobile User" color="black" position="-1.8 0 0.2" width="15" height="20"></a-text>
            </a-entity>
        </a-scene>

        <script>

                var vr = false;
                var mobile = false;

                let socket = io();
    
                socket.on('connect', function(){
                    console.log('Start Page Loaded');
                });
    
                document.querySelector('#vrUser').addEventListener('click', function(){
                    console.log('VR User Selected');
                    socket.emit('vrclicked');
                    vr = true;
                });
    
                document.querySelector('#mobileUser').addEventListener('click', function(){
                    console.log('Mobile User Selected');
                    socket.emit('mobileclicked');
                    mobile = true;
                });

                if(vr == true){
                    window.location.href('/Public/kitchen.html');
                }

                if(mobile == true){
                    window.location.href('/Public/mobile.html');
                }
                
            </script>
    </body>
</html>